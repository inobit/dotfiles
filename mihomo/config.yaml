# global config
mixed-port: 7890
allow-lan: true
mode: rule
global-client-fingerprint: chrome # è®¾ç½®å…¨å±€å®¢æˆ·ç«¯æŒ‡çº¹ä¸º Chromeï¼Œä½¿ Clash åœ¨å»ºç«‹è¿æ¥æ—¶æ¨¡æ‹Ÿ Chrome æµè§ˆå™¨çš„ TLS æŒ‡çº¹ï¼Œå¢å¼ºéšç§æ€§å’Œç»•è¿‡æŸäº›ç½‘ç«™çš„æŒ‡çº¹æ£€æµ‹
# geo config
geodata-mode: true
geodata-loader: memconservative
geo-auto-update: true
geo-update-interval: 48 # æ›´æ–°é—´éš”ï¼Œå•ä½ï¼šå°æ—¶
geox-url:
  geoip: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat"
  geosite: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat"
  mmdb: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb"
  asn: "https://github.com/xishang0128/geoip/releases/download/latest/GeoLite2-ASN.mmdb"
log-level: info
ipv6: true
external-controller: 0.0.0.0:9090
secret: <secret>
unified-delay: true
external-controller-cors:
  allow-origins:
    - "*"
  allow-private-network: true
# dns config
dns:
  enable: true
  ipv6: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - "rule-set:private"
    - "rule-set:direct"
    - "geosite:connectivity-check"
    - "geosite:private"
    - "rule-set:fake-ip-filter"
  prefer-h3: false # å¦‚æœDNSæœåŠ¡å™¨æ”¯æŒDoH3ä¼šä¼˜å…ˆä½¿ç”¨h3ï¼Œæå‡æ€§èƒ½
  default-nameserver: # è§£æDNSæœåŠ¡å™¨çš„åŸŸåï¼Œæ‰€ä»¥è¿™é‡Œå¿…é¡»ä¸ºip
    - 223.5.5.5
    - 8.8.8.8
    - tls://1.12.12.12:853
    - tls://223.5.5.5:853
  nameserver: # å»ºè®®å›½å†…åŠ å¯†DNS
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  respect-rules: true # è®© DNS è§£æéµå¾ª Clash çš„è·¯ç”±è§„åˆ™ï¼Œä¸è¦å’Œprefer-h3é…åˆä½¿ç”¨
  proxy-server-nameserver: # ä»£ç†èŠ‚ç‚¹åŸŸåè§£ææœåŠ¡å™¨
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  nameserver-policy:
    "geosite:cn,private": # å›½å†…åŸŸåå’Œç§æœ‰åŸŸåå¼ºåˆ¶èµ°å›½å†… DNS
      - https://dns.alidns.com/dns-query # é˜¿é‡Œ
      - https://doh.pub/dns-query # è…¾è®¯
      - 223.5.5.5 # é˜¿é‡Œ UDP
      - 119.29.29.29 # è…¾è®¯ UDP
    "geo:cn": # ä¹Ÿå¯ä»¥ç”¨ geo:cn åŒ¹é… IP
      - https://dns.alidns.com/dns-query # é˜¿é‡Œ
      - https://doh.pub/dns-query
      - 223.5.5.5 # é˜¿é‡Œ UDP
      - 119.29.29.29 # è…¾è®¯ UDP
    "geosite:gfw": # æ–°å¢ï¼šGFW åˆ—è¡¨åŸŸåå¼ºåˆ¶èµ°å›½å¤– DNS
      - https://1.1.1.1/dns-query
      - https://dns.google/dns-query
      - 1.1.1.1
      - 8.8.8.8
    "geosite:geolocation-!cn": # æ–°å¢ï¼šéä¸­å›½å¤§é™†åŸŸåå¼ºåˆ¶èµ°å›½å¤– DNS
      - https://1.1.1.1/dns-query
      - https://dns.google/dns-query
      - 1.1.1.1
      - 8.8.8.8
    "full-nameserver": # æ–°å¢ï¼šæœ€ç»ˆå…œåº•ï¼Œæ‰€æœ‰æœªåŒ¹é…çš„åŸŸåæŸ¥è¯¢å¼ºåˆ¶èµ°å›½å¤– DNS
      - https://1.1.1.1/dns-query
      - https://dns.google/dns-query
      - 1.1.1.1
      - 8.8.8.8
  fallback:
    - 1.1.1.1 # Cloudflare DNSå¤‡ç”¨
    - 8.8.8.8 # Google DNSå¤‡ç”¨
# tun config
tun:
  enable: true
  # stack: mixed # system/gvisor/mixed
  stack: mixed
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true
  strict-route: true # é¿å…å†—ä½™è·¯ç”±æ±¡æŸ“ç³»ç»Ÿè¡¨
  dns-hijack:
    - any:53
    - tcp://any:53
  mtu: 1500 # å‡å°‘ MTU é—®é¢˜ï¼Œå¦‚ç½‘é¡µæ— æ³•æ‰“å¼€ã€æµ‹é€Ÿæ…¢
  gso: false # å¯ç”¨é€šç”¨åˆ†æ®µå¸è½½ï¼ˆæå‡æ€§èƒ½ï¼‰(enable this option causes the network disconnect, tested on the debain12 virtual machine )
  gso-max-size: 65536
  udp-timeout: 300 # UDP ä¼šè¯ä¿æŒæ—¶é—´
# æµé‡å—…æ¢ï¼Œå¯¹äºredir-hostæƒ…å†µï¼ˆçœŸå®ip),å—…æ¢åŸŸå
sniffer:
  enable: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  force-domain:
    - "+.v2ex.com"
  # å—…æ¢ç»“æœè·³è¿‡
  skip-domain:
    - "+.baidu.com"
    - "+.bilibili.com"
profile:
  store-selected: true
  store-fake-ip: true
proxy-providers:
  <subscription name>:
    type: http
    url: <subscription url>
    path: ./proxy_providers/<subscription name>.yaml
    interval: 3600
    proxy: DIRECT
    size-limit: 0
    header:
      User-Agent:
        - "Clash/v1.18.0"
        - "mihomo/1.18.3"
    health-check:
      enable: true
      url: https://cp.cloudflare.com
      interval: 86400
      timeout: 5000
      lazy: true
      expected-status: 204
proxy-group-anchor:
  url-test: &url-test
    type: url-test
    include-all: true
    hidden: true
    url: https://cp.cloudflare.com
    interval: 86400
  std-groups: &std-groups
    - ğŸ‡­ğŸ‡°ï¸ é¦™æ¸¯
    - ğŸ‡­ğŸ‡°ï¸ é¦™æ¸¯â°
    - ğŸ‡¹ğŸ‡¼ å°æ¹¾
    - ğŸ‡¹ğŸ‡¼ å°æ¹¾â°
    - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
    - ğŸ‡¯ğŸ‡µ æ—¥æœ¬â°
    - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
    - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡â°
    - ğŸ‡ºğŸ‡¸ ç¾å›½
    - ğŸ‡ºğŸ‡¸ ç¾å›½âœ”ï¸
    - ğŸ‡ºğŸ‡¸ ç¾å›½â°
    - ğŸ‡¬ğŸ‡§ è‹±å›½
    - ğŸ‡¬ğŸ‡§ è‹±å›½â°
    - è‡ªå»º
    - DIRECT
    - ğŸ§­ masterè‡ªåŠ¨é€‰æ‹©
proxy-groups:
  - name: ä»£ç†æ¨¡å¼
    type: select
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Final.png
    proxies:
      - PROXY
      - DIRECT
  - name: è‡ªå»º
    type: select
    icon: https://www.clashverge.dev/assets/icons/link.svg
    include-all: true
    filter: hotfree
  - name: Master
    type: select
    icon: https://www.clashverge.dev/assets/icons/speed.svg
    proxies: *std-groups
    include-all: true
    filter: (?i)^master
  - name: ğŸ§­ masterè‡ªåŠ¨é€‰æ‹©
    <<: *url-test
    filter: (?i)^master
  - name: ğŸ‡­ğŸ‡°ï¸ é¦™æ¸¯
    <<: *url-test
    filter: (?i)^master.*(æ¸¯|Hong\sKong).*$
  - name: ğŸ‡­ğŸ‡°ï¸ é¦™æ¸¯â°
    <<: *url-test
    filter: (?i)^master.*(æ¸¯|Hong\sKong)[^|]*$
  - name: ğŸ‡¹ğŸ‡¼ å°æ¹¾
    <<: *url-test
    filter: (?i)^master.*(å°|Taiwan).*$
  - name: ğŸ‡¹ğŸ‡¼ å°æ¹¾â°
    <<: *url-test
    filter: (?i)^master.*(å°|Taiwan)[^|]*$
  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬
    <<: *url-test
    filter: (?i)^master.*(æ—¥|Japan).*$
  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬â°
    <<: *url-test
    filter: (?i)^master.*(æ—¥|Japan)[^|]*$
  - name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
    <<: *url-test
    filter: (?i)^master.*(æ–°|Singapore).*$
  - name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡â°
    <<: *url-test
    filter: (?i)^master.*(æ–°|Singapore).*$
  - name: ğŸ‡ºğŸ‡¸ ç¾å›½
    <<: *url-test
    filter: (?i)^master.*(ç¾|USA).*$
  - name: ğŸ‡ºğŸ‡¸ ç¾å›½âœ”ï¸
    <<: *url-test
    filter: (?i)^master.*(ç¾|USA).*(åŸç”Ÿ).*$
  - name: ğŸ‡ºğŸ‡¸ ç¾å›½â°
    <<: *url-test
    filter: (?i)^master.*(ç¾|USA)[^|]*$
  - name: ğŸ‡¬ğŸ‡§ è‹±å›½
    <<: *url-test
    filter: (?i)^master.*(è‹±|UK).*$
  - name: ğŸ‡¬ğŸ‡§ è‹±å›½â°
    <<: *url-test
    filter: (?i)^master.*(è‹±|UK)[^|]*$
  - name: Microsoft
    type: select
    icon: https://www.clashverge.dev/assets/icons/microsoft.svg
    proxies: *std-groups
  - name: Steam
    type: select
    icon: https://www.clashverge.dev/assets/icons/steam.svg
    proxies: *std-groups
  - name: Video
    type: select
    icon: https://www.clashverge.dev/assets/icons/netflix.svg
    proxies: *std-groups
  - name: Github
    type: select
    icon: https://www.clashverge.dev/assets/icons/github.svg
    proxies: *std-groups
  - name: Google
    type: select
    icon: https://www.clashverge.dev/assets/icons/google.svg
    proxies: *std-groups
  - name: Spotify
    type: select
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Spotify.png
    proxies: *std-groups
  - name: Twitter
    type: select
    icon: https://www.clashverge.dev/assets/icons/twitter.svg
    proxies: *std-groups
  - name: Claude
    type: select
    icon: https://www.clashverge.dev/assets/icons/claude.svg
    proxies: *std-groups
  - name: Chatgpt
    type: select
    icon: https://www.clashverge.dev/assets/icons/chatgpt.svg
    proxies: *std-groups
  - name: å¹¿å‘Šæ‹¦æˆª
    type: select
    icon: https://www.clashverge.dev/assets/icons/block.svg
    proxies:
      - REJECT
      - DIRECT
      - PROXY
  - name: PROXY
    type: select
    icon: https://www.clashverge.dev/assets/icons/adjust.svg
    proxies:
      - Master
      - è‡ªå»º
      - DIRECT
rule-anchor:
  domian: &domian
    type: http
    behavior: domain
    interval: 86400
  classical: &classical
    type: http
    behavior: classical
    interval: 86400
  ip: &ip
    type: http
    behavior: ipcidr
    interval: 86400
rule-providers:
  fake-ip-filter:
    <<: *domian
    format: text
    url: https://cdn.jsdelivr.net/gh/juewuy/ShellCrash@dev/public/fake_ip_filter.list
    path: ./ruleset/fake_ip_filter.list
  steam:
    <<: *classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Steam/Steam.yaml
    path: ./ruleset/steam.yaml
  spotify:
    <<: *classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Spotify/Spotify.yaml
    path: ./ruleset/spotify.yaml
  twitter:
    <<: *classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Twitter/Twitter.yaml
    path: ./ruleset/twitter.yaml
  github:
    <<: *classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/GitHub/GitHub.yaml
    path: ./ruleset/github.yaml
  microsoft:
    <<: *domian
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Microsoft/Microsoft.yaml
    path: ./ruleset/microsoft.yaml
  openai:
    <<: *classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/OpenAI/OpenAI.yaml
    path: ./ruleset/openai.yaml
  claude:
    <<: *classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Claude/Claude.yaml
    path: ./ruleset/claude.yaml
  reject:
    <<: *domian
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt
    path: ./ruleset/reject.yaml
  icloud:
    <<: *domian
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt
    path: ./ruleset/icloud.yaml
  apple:
    <<: *domian
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt
    path: ./ruleset/apple.yaml
  gemini:
    <<: *classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Gemini/Gemini.yaml
    path: ./ruleset/gemini.yaml
  google:
    <<: *classical
    url: https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Google/Google.yaml
    path: ./ruleset/google.yaml
  proxy:
    <<: *domian
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt
    path: ./ruleset/proxy.yaml
  direct:
    <<: *domian
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt
    path: ./ruleset/direct.yaml
  private:
    <<: *domian
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt
    path: ./ruleset/private.yaml
  gfw:
    <<: *domian
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt
    path: ./ruleset/gfw.yaml
  greatfire:
    <<: *domian
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/greatfire.txt
    path: ./ruleset/greatfire.yaml
  tld-not-cn:
    <<: *domian
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt
    path: ./ruleset/tld-not-cn.yaml
  telegramcidr:
    <<: *ip
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt
    path: ./ruleset/telegramcidr.yaml
  cncidr:
    <<: *ip
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt
    path: ./ruleset/cncidr.yaml
  lancidr:
    <<: *ip
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt
    path: ./ruleset/lancidr.yaml
  applications:
    <<: *classical
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt
    path: ./ruleset/applications.yaml
rules:
  - DOMAIN-SUFFIX,olevod.com,Video
  - DOMAIN-SUFFIX,olelive.com,Video
  - DOMAIN-SUFFIX,olemovienews.com,Video
  - DOMAIN-SUFFIX,iyf.tv,Video
  - DOMAIN-SUFFIX,anygate.vip,Video
  - DOMAIN-SUFFIX,generalcdn.com,Video
  - DOMAIN-SUFFIX,newwycdn.com,Video
  - DOMAIN-SUFFIX,newyvpa.com,Video
  - DOMAIN-SUFFIX,tfbgddd.com,Video
  - DOMAIN-SUFFIX,tfbgeee.com,Video
  - DOMAIN-SUFFIX,wyav.tv,Video
  - DOMAIN-SUFFIX,debian.org, ğŸ‡¹ğŸ‡¼ å°æ¹¾
  - DOMAIN-SUFFIX,apache.org, ğŸ‡¹ğŸ‡¼ å°æ¹¾
  - DOMAIN-SUFFIX,hotfree.xyz,DIRECT
  - DOMAIN-SUFFIX,88code.org,DIRECT
  - RULE-SET,applications,DIRECT
  - RULE-SET,steam,Steam
  - DOMAIN-SUFFIX,diagrams.org,DIRECT
  - DOMAIN,clash.razord.top,DIRECT
  - DOMAIN,yacd.haishan.me,DIRECT
  - RULE-SET,reject,å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,private,DIRECT
  - RULE-SET,icloud,DIRECT
  - RULE-SET,apple,DIRECT
  - RULE-SET,gemini,Claude
  - RULE-SET,google,Google
  - RULE-SET,github,Github
  - RULE-SET,spotify,Spotify
  - RULE-SET,twitter,Twitter
  - RULE-SET,openai,Chatgpt
  - DOMAIN-SUFFIX,claudeusercontent.com,Claude
  - DOMAIN-SUFFIX,openrouter.ai,Claude
  - RULE-SET,claude,Claude
  - RULE-SET,microsoft,Microsoft
  - RULE-SET,telegramcidr,PROXY
  - RULE-SET,tld-not-cn,PROXY
  - RULE-SET,gfw,PROXY
  - RULE-SET,greatfire,PROXY
  - RULE-SET,direct,DIRECT
  - RULE-SET,lancidr,DIRECT
  - RULE-SET,cncidr,DIRECT
  - GEOIP,LAN,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,ä»£ç†æ¨¡å¼
